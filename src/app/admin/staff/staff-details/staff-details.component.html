<div class="staff-details" *ngIf="staff; else loading">
  <h2>
    {{ staff.name }} <span class="username">({{ staff.username }})</span>
  </h2>

  <div class="info">
    <p><strong>Email:</strong> {{ staff.email }}</p>
    <p><strong>Phone:</strong> {{ staff.phone }}</p>
    <p><strong>Company:</strong> {{ staff.company.name }}</p>
  </div>

  <div class="stats-cards">
    <div class="card">
      <h4>Number of Times Signed In</h4>
      <p>{{ staff.signInCount }}</p>
    </div>
    <div class="card">
      <h4>Lateness Count</h4>
      <p>{{ staff.latenessCount }}</p>
    </div>
    <div class="card">
      <h4>Total Deductions</h4>
      <p>₦{{ staff.totalDeductions | number }}</p>
    </div>
  </div>

  <h3>Recent Sign-ins</h3>

  <div class="table-wrapper">
    <table class="signins-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Minutes Late</th>
          <th>Deduction</th>
          <th>Note</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let record of staff.signInHistory">
          <td>{{ record.dateTime | date : "mediumDate" }}</td>
          <td [class.late]="record.minutesLate > 0">
            {{ record.minutesLate }}
          </td>
          <td>₦{{ record.deductionAmount || 0 }}</td>
          <td>{{ record.note || "—" }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<ng-template #loading>
  <p class="loading">Loading staff details...</p>
</ng-template>
